{"ast":null,"code":"import { fromJS } from 'immutable';\nimport * as actionTypes from './actionTypes';\nimport list_pic_1 from '../../../statics/list-pic-1.jpeg';\nimport recommend_list_1 from '../../../statics/recommend-list-1.png';\nimport recommend_list_2 from '../../../statics/recommend-list-2.png';\nimport recommend_list_3 from '../../../statics/recommend-list-3.png';\nimport recommend_list_4 from '../../../statics/recommend-list-4.png';\nconst defaultState = fromJS({\n  pageNow: 1,\n  lastArticle: false,\n  articleList: [],\n  recommendList: [],\n  backToTopShown: false\n});\nexport default ((state = defaultState, action) => {\n  switch (action.type) {\n    case actionTypes.GENERATE_INITIAL_DATA:\n      var newArticleList = action.articleList;\n      newArticleList.map(item => {\n        item.pic = list_pic_1;\n        return item;\n      });\n      var newRecommendList = action.recommendList;\n      newRecommendList[0].pic = recommend_list_1;\n      newRecommendList[1].pic = recommend_list_2;\n      newRecommendList[2].pic = recommend_list_3;\n      newRecommendList[3].pic = recommend_list_4;\n      return state.merge({\n        articleList: fromJS(newArticleList),\n        recommendList: fromJS(newRecommendList)\n      });\n\n    case actionTypes.MORE_PAGE:\n      var page = state.toJS();\n\n      if (page.pageNow < Math.ceil(page.articleList.length / 10)) {\n        page.pageNow++;\n        return state.set('pageNow', page.pageNow);\n      } else {\n        return state.set('pageNow', page.pageNow).set('lastArticle', true);\n      }\n\n    case actionTypes.SCROLLTOPSHOWN:\n      return state.set('backToTopShown', action.value);\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"sources":["/Users/duke/Desktop/workspace/React/jianshu/src/pages/home/store/reducer.js"],"names":["fromJS","actionTypes","list_pic_1","recommend_list_1","recommend_list_2","recommend_list_3","recommend_list_4","defaultState","pageNow","lastArticle","articleList","recommendList","backToTopShown","state","action","type","GENERATE_INITIAL_DATA","newArticleList","map","item","pic","newRecommendList","merge","MORE_PAGE","page","toJS","Math","ceil","length","set","SCROLLTOPSHOWN","value"],"mappings":"AAAA,SAASA,MAAT,QAAuB,WAAvB;AACA,OAAO,KAAKC,WAAZ,MAA6B,eAA7B;AACA,OAAOC,UAAP,MAAuB,kCAAvB;AACA,OAAOC,gBAAP,MAA6B,uCAA7B;AACA,OAAOC,gBAAP,MAA6B,uCAA7B;AACA,OAAOC,gBAAP,MAA6B,uCAA7B;AACA,OAAOC,gBAAP,MAA6B,uCAA7B;AAIA,MAAMC,YAAY,GAAGP,MAAM,CAAC;AACxBQ,EAAAA,OAAO,EAAE,CADe;AAExBC,EAAAA,WAAW,EAAE,KAFW;AAGxBC,EAAAA,WAAW,EAAE,EAHW;AAIxBC,EAAAA,aAAa,EAAE,EAJS;AAKxBC,EAAAA,cAAc,EAAE;AALQ,CAAD,CAA3B;AAQA,gBAAe,CAACC,KAAK,GAAGN,YAAT,EAAuBO,MAAvB,KAAkC;AAC7C,UAAOA,MAAM,CAACC,IAAd;AACI,SAAMd,WAAW,CAACe,qBAAlB;AACI,UAAIC,cAAc,GAAGH,MAAM,CAACJ,WAA5B;AACAO,MAAAA,cAAc,CAACC,GAAf,CAAoBC,IAAD,IAAQ;AACvBA,QAAAA,IAAI,CAACC,GAAL,GAAWlB,UAAX;AACA,eAAOiB,IAAP;AACH,OAHD;AAIA,UAAIE,gBAAgB,GAAGP,MAAM,CAACH,aAA9B;AACAU,MAAAA,gBAAgB,CAAC,CAAD,CAAhB,CAAoBD,GAApB,GAA0BjB,gBAA1B;AACAkB,MAAAA,gBAAgB,CAAC,CAAD,CAAhB,CAAoBD,GAApB,GAA0BhB,gBAA1B;AACAiB,MAAAA,gBAAgB,CAAC,CAAD,CAAhB,CAAoBD,GAApB,GAA0Bf,gBAA1B;AACAgB,MAAAA,gBAAgB,CAAC,CAAD,CAAhB,CAAoBD,GAApB,GAA0Bd,gBAA1B;AACA,aAAOO,KAAK,CAACS,KAAN,CAAY;AACfZ,QAAAA,WAAW,EAAEV,MAAM,CAACiB,cAAD,CADJ;AAEfN,QAAAA,aAAa,EAAEX,MAAM,CAACqB,gBAAD;AAFN,OAAZ,CAAP;;AAIJ,SAAMpB,WAAW,CAACsB,SAAlB;AACI,UAAIC,IAAI,GAAGX,KAAK,CAACY,IAAN,EAAX;;AACA,UAAID,IAAI,CAAChB,OAAL,GAAekB,IAAI,CAACC,IAAL,CAAUH,IAAI,CAACd,WAAL,CAAiBkB,MAAjB,GAA0B,EAApC,CAAnB,EAA4D;AACxDJ,QAAAA,IAAI,CAAChB,OAAL;AACA,eAAOK,KAAK,CAACgB,GAAN,CAAU,SAAV,EAAoBL,IAAI,CAAChB,OAAzB,CAAP;AACH,OAHD,MAGO;AACH,eAAOK,KAAK,CAACgB,GAAN,CAAU,SAAV,EAAoBL,IAAI,CAAChB,OAAzB,EAAkCqB,GAAlC,CAAsC,aAAtC,EAAoD,IAApD,CAAP;AACH;;AACL,SAAM5B,WAAW,CAAC6B,cAAlB;AACI,aAAOjB,KAAK,CAACgB,GAAN,CAAU,gBAAV,EAA2Bf,MAAM,CAACiB,KAAlC,CAAP;;AACJ;AAAS,aAAOlB,KAAP;AA1Bb;AA4BH,CA7BD","sourcesContent":["import { fromJS } from 'immutable';\nimport * as actionTypes from './actionTypes';\nimport list_pic_1 from '../../../statics/list-pic-1.jpeg';\nimport recommend_list_1 from '../../../statics/recommend-list-1.png';\nimport recommend_list_2 from '../../../statics/recommend-list-2.png';\nimport recommend_list_3 from '../../../statics/recommend-list-3.png';\nimport recommend_list_4 from '../../../statics/recommend-list-4.png';\n\n\n\nconst defaultState = fromJS({\n    pageNow: 1,\n    lastArticle: false,\n    articleList: [],\n    recommendList: [],\n    backToTopShown: false\n});\n\nexport default (state = defaultState, action) => {\n    switch(action.type) {\n        case (actionTypes.GENERATE_INITIAL_DATA):\n            var newArticleList = action.articleList;\n            newArticleList.map((item)=>{\n                item.pic = list_pic_1;\n                return item;\n            })\n            var newRecommendList = action.recommendList;\n            newRecommendList[0].pic = recommend_list_1;\n            newRecommendList[1].pic = recommend_list_2;\n            newRecommendList[2].pic = recommend_list_3;\n            newRecommendList[3].pic = recommend_list_4;\n            return state.merge({\n                articleList: fromJS(newArticleList),\n                recommendList: fromJS(newRecommendList)\n            })\n        case (actionTypes.MORE_PAGE):\n            var page = state.toJS()\n            if (page.pageNow < Math.ceil(page.articleList.length / 10)) { \n                page.pageNow++;\n                return state.set('pageNow',page.pageNow);\n            } else {\n                return state.set('pageNow',page.pageNow).set('lastArticle',true);   \n            }\n        case (actionTypes.SCROLLTOPSHOWN):\n            return state.set('backToTopShown',action.value);\n        default: return state;\n    }\n}"]},"metadata":{},"sourceType":"module"}