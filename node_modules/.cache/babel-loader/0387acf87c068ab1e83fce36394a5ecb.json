{"ast":null,"code":"import { fromJS } from 'immutable';\nimport * as actionTypes from './actionTypes';\nimport * as actionCreators from './actionCreators';\nimport list_pic_1 from '../../../statics/list-pic-1.jpeg';\nimport recommend_list_1 from '../../../statics/recommend-list-1.png';\nimport recommend_list_2 from '../../../statics/recommend-list-2.png';\nimport recommend_list_3 from '../../../statics/recommend-list-3.png';\nimport recommend_list_4 from '../../../statics/recommend-list-4.png';\nconst defaultState = fromJS({\n  pageNow: 1,\n  lastArticle: false,\n  articleList: [],\n  recommendList: [],\n  backToTopShown: false\n});\n\nconst generate_initial_data = (state, action) => {\n  var newArticleList = action.articleList;\n  newArticleList.map(item => {\n    item.pic = list_pic_1;\n    return item;\n  });\n  var newRecommendList = action.recommendList;\n  newRecommendList[0].pic = recommend_list_1;\n  newRecommendList[1].pic = recommend_list_2;\n  newRecommendList[2].pic = recommend_list_3;\n  newRecommendList[3].pic = recommend_list_4;\n  return state.merge({\n    articleList: fromJS(newArticleList),\n    recommendList: fromJS(newRecommendList)\n  });\n};\n\nexport default ((state = defaultState, action) => {\n  switch (action.type) {\n    case actionTypes.GENERATE_INITIAL_DATA:\n      return generate_initial_data(state, action);\n\n    case actionTypes.MORE_PAGE:\n      var page = state.toJS();\n\n      if (page.pageNow < Math.ceil(page.articleList.length / 10)) {\n        page.pageNow++;\n        return state.set('pageNow', page.pageNow);\n      } else {\n        return state.set('pageNow', page.pageNow).set('lastArticle', true);\n      }\n\n    case actionTypes.SCROLLTOPSHOWN:\n      return state.set('backToTopShown', action.value);\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"sources":["/Users/duke/Desktop/workspace/React/jianshu/src/pages/home/store/reducer.js"],"names":["fromJS","actionTypes","actionCreators","list_pic_1","recommend_list_1","recommend_list_2","recommend_list_3","recommend_list_4","defaultState","pageNow","lastArticle","articleList","recommendList","backToTopShown","generate_initial_data","state","action","newArticleList","map","item","pic","newRecommendList","merge","type","GENERATE_INITIAL_DATA","MORE_PAGE","page","toJS","Math","ceil","length","set","SCROLLTOPSHOWN","value"],"mappings":"AAAA,SAASA,MAAT,QAAuB,WAAvB;AACA,OAAO,KAAKC,WAAZ,MAA6B,eAA7B;AACA,OAAO,KAAKC,cAAZ,MAAgC,kBAAhC;AACA,OAAOC,UAAP,MAAuB,kCAAvB;AACA,OAAOC,gBAAP,MAA6B,uCAA7B;AACA,OAAOC,gBAAP,MAA6B,uCAA7B;AACA,OAAOC,gBAAP,MAA6B,uCAA7B;AACA,OAAOC,gBAAP,MAA6B,uCAA7B;AAIA,MAAMC,YAAY,GAAGR,MAAM,CAAC;AACxBS,EAAAA,OAAO,EAAE,CADe;AAExBC,EAAAA,WAAW,EAAE,KAFW;AAGxBC,EAAAA,WAAW,EAAE,EAHW;AAIxBC,EAAAA,aAAa,EAAE,EAJS;AAKxBC,EAAAA,cAAc,EAAE;AALQ,CAAD,CAA3B;;AAQA,MAAMC,qBAAqB,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;AAC7C,MAAIC,cAAc,GAAGD,MAAM,CAACL,WAA5B;AACAM,EAAAA,cAAc,CAACC,GAAf,CAAoBC,IAAD,IAAQ;AACvBA,IAAAA,IAAI,CAACC,GAAL,GAAWjB,UAAX;AACA,WAAOgB,IAAP;AACH,GAHD;AAIA,MAAIE,gBAAgB,GAAGL,MAAM,CAACJ,aAA9B;AACAS,EAAAA,gBAAgB,CAAC,CAAD,CAAhB,CAAoBD,GAApB,GAA0BhB,gBAA1B;AACAiB,EAAAA,gBAAgB,CAAC,CAAD,CAAhB,CAAoBD,GAApB,GAA0Bf,gBAA1B;AACAgB,EAAAA,gBAAgB,CAAC,CAAD,CAAhB,CAAoBD,GAApB,GAA0Bd,gBAA1B;AACAe,EAAAA,gBAAgB,CAAC,CAAD,CAAhB,CAAoBD,GAApB,GAA0Bb,gBAA1B;AACA,SAAOQ,KAAK,CAACO,KAAN,CAAY;AACfX,IAAAA,WAAW,EAAEX,MAAM,CAACiB,cAAD,CADJ;AAEfL,IAAAA,aAAa,EAAEZ,MAAM,CAACqB,gBAAD;AAFN,GAAZ,CAAP;AAIH,CAfD;;AAiBA,gBAAe,CAACN,KAAK,GAAGP,YAAT,EAAuBQ,MAAvB,KAAkC;AAC7C,UAAOA,MAAM,CAACO,IAAd;AACI,SAAMtB,WAAW,CAACuB,qBAAlB;AACI,aAAOV,qBAAqB,CAACC,KAAD,EAAOC,MAAP,CAA5B;;AACJ,SAAMf,WAAW,CAACwB,SAAlB;AACI,UAAIC,IAAI,GAAGX,KAAK,CAACY,IAAN,EAAX;;AACA,UAAID,IAAI,CAACjB,OAAL,GAAemB,IAAI,CAACC,IAAL,CAAUH,IAAI,CAACf,WAAL,CAAiBmB,MAAjB,GAA0B,EAApC,CAAnB,EAA4D;AACxDJ,QAAAA,IAAI,CAACjB,OAAL;AACA,eAAOM,KAAK,CAACgB,GAAN,CAAU,SAAV,EAAoBL,IAAI,CAACjB,OAAzB,CAAP;AACH,OAHD,MAGO;AACH,eAAOM,KAAK,CAACgB,GAAN,CAAU,SAAV,EAAoBL,IAAI,CAACjB,OAAzB,EAAkCsB,GAAlC,CAAsC,aAAtC,EAAoD,IAApD,CAAP;AACH;;AACL,SAAM9B,WAAW,CAAC+B,cAAlB;AACI,aAAOjB,KAAK,CAACgB,GAAN,CAAU,gBAAV,EAA2Bf,MAAM,CAACiB,KAAlC,CAAP;;AACJ;AAAS,aAAOlB,KAAP;AAbb;AAeH,CAhBD","sourcesContent":["import { fromJS } from 'immutable';\nimport * as actionTypes from './actionTypes';\nimport * as actionCreators from './actionCreators';\nimport list_pic_1 from '../../../statics/list-pic-1.jpeg';\nimport recommend_list_1 from '../../../statics/recommend-list-1.png';\nimport recommend_list_2 from '../../../statics/recommend-list-2.png';\nimport recommend_list_3 from '../../../statics/recommend-list-3.png';\nimport recommend_list_4 from '../../../statics/recommend-list-4.png';\n\n\n\nconst defaultState = fromJS({\n    pageNow: 1,\n    lastArticle: false,\n    articleList: [],\n    recommendList: [],\n    backToTopShown: false\n});\n\nconst generate_initial_data = (state, action) => {\n    var newArticleList = action.articleList;\n    newArticleList.map((item)=>{\n        item.pic = list_pic_1;\n        return item;\n    })\n    var newRecommendList = action.recommendList;\n    newRecommendList[0].pic = recommend_list_1;\n    newRecommendList[1].pic = recommend_list_2;\n    newRecommendList[2].pic = recommend_list_3;\n    newRecommendList[3].pic = recommend_list_4;\n    return state.merge({\n        articleList: fromJS(newArticleList),\n        recommendList: fromJS(newRecommendList)\n    })\n}\n\nexport default (state = defaultState, action) => {\n    switch(action.type) {\n        case (actionTypes.GENERATE_INITIAL_DATA):\n            return generate_initial_data(state,action);\n        case (actionTypes.MORE_PAGE):\n            var page = state.toJS()\n            if (page.pageNow < Math.ceil(page.articleList.length / 10)) { \n                page.pageNow++;\n                return state.set('pageNow',page.pageNow);\n            } else {\n                return state.set('pageNow',page.pageNow).set('lastArticle',true);   \n            }\n        case (actionTypes.SCROLLTOPSHOWN):\n            return state.set('backToTopShown',action.value);\n        default: return state;\n    }\n}"]},"metadata":{},"sourceType":"module"}